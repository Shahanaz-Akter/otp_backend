<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OTP</title>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,300;1,400&display=swap');
      font-family: 'Poppins', sans-serif;
    }


    .login-page {
      width: 100%;
      height: 100vh;
      display: inline-block;
      display: flex;
      align-items: center;
      background: url('/assets/images/auth/bg.png');
      background-size: cover;
      background-position: left center;
    }

    .logo img {

      width: auto;

    }

    @media(max-width: 458px) {
      .login-page {
        align-items: flex-start;
        padding-top: 12px;
        ;
      }

      .logo img {
        height: 28px;
        ;
      }

      .links span:nth-child(1) {
        font-size: 15px;
        ;
      }

      .num_container {
        width: 92% !important;
        margin: 5px auto !important;
        padding: 10px 15px !important;
      }

      .header {
        text-align: center;
      }
    }

    form input::placeholder {
      font-size: 15px;
      color: #999999;
    }

    .inputfield {
      /* width: 100%; */
      /* max-width: 400px;; */
      display: flex;
      justify-content: center;
    }

    .input {

      height: 3em;
      width: 3em;
      border: 2px solid #dad9df;
      outline: none;
      text-align: center;
      font-size: 1.5em;
      /* border-radius: 15em; */
      border-radius: 10px;
      background-color: rgb(216, 216, 216);
      outline: none;
      margin-right: 12px;

    }

    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .input:disabled {
      color: #89888b;
    }

    .input:focus {
      color: #ffffff;
      /* background-color: dodgerblue;
      border: 3px solid dodgerBlue; */

      background-color: #6499FF;
      border: 3px solid;
    }

    #submit {
      text-align: center;
      width: 50%;
      padding: 1em 3em;
      border-radius: 0.5em;
      background: linear-gradient(to right, #56b8dd, #6e80e6, #8467e7, #b444ee, #e639f7, #c63bf0);
      color: white;
      margin: 1em auto 0 auto;
      font-size: 14px;
      cursor: pointer;
      border: none;
    }

    .show {
      display: block;
    }

    .hide {
      display: none;
    }

    .logo img {
      height: 40px;
      width: auto;
    }
  </style>

  <style>
    .parent_ {
      position: relative;
    }

    @media (min-width: 1800px) and (max-width: 1920px) {
      .child_ {
        position: absolute;
        left: 910px;
        top: 35%;
        height: 300px;
        width: 1px;
      }
    }
  </style>

</head>

<body>

  <div class="login-page bg-light">
    <div class="container bg-white ps-4 pt-4 pe-4 pb-0 " style="width:80%;min-height:430px;border-radius:10px;">


      <div class="d-flex align-items-center justify-content-between ch1">
        <div class="logo">
          <svg width="39" height="40" viewBox="0 0 39 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="39" height="40" rx="6" fill="#2871FF" />
            <path
              d="M9.5 15.1C9.5 13.1398 9.5 12.1597 9.88148 11.411C10.217 10.7525 10.7525 10.217 11.411 9.88148C12.1597 9.5 13.1398 9.5 15.1 9.5H24.9C26.8602 9.5 27.8403 9.5 28.589 9.88148C29.2475 10.217 29.783 10.7525 30.1185 11.411C30.5 12.1597 30.5 13.1398 30.5 15.1V21.75C30.5 23.3808 30.5 24.1962 30.2336 24.8394C29.8783 25.697 29.197 26.3783 28.3394 26.7336C27.6962 27 26.8808 27 25.25 27C24.68 27 24.395 27 24.1306 27.0624C23.778 27.1456 23.4497 27.3098 23.1716 27.5419C22.963 27.716 22.792 27.944 22.45 28.4L20.7467 30.6711C20.4934 31.0089 20.3667 31.1777 20.2114 31.2381C20.0754 31.291 19.9246 31.291 19.7886 31.2381C19.6333 31.1777 19.5066 31.0089 19.2533 30.6711L17.55 28.4C17.208 27.944 17.037 27.716 16.8284 27.5419C16.5503 27.3098 16.222 27.1456 15.8694 27.0624C15.605 27 15.32 27 14.75 27C13.1192 27 12.3038 27 11.6606 26.7336C10.803 26.3783 10.1217 25.697 9.76642 24.8394C9.5 24.1962 9.5 23.3808 9.5 21.75V15.1Z"
              stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M19.9968 15.719C19.0638 14.6585 17.5079 14.3733 16.3389 15.3444C15.1698 16.3155 15.0053 17.9391 15.9233 19.0876C16.4692 19.7706 17.8063 20.9953 18.8006 21.8759C19.211 22.2395 19.4162 22.4212 19.6633 22.4949C19.8746 22.558 20.119 22.558 20.3304 22.4949C20.5774 22.4212 20.7826 22.2395 21.193 21.8759C22.1873 20.9953 23.5244 19.7706 24.0703 19.0876C24.9884 17.9391 24.8439 16.3052 23.6547 15.3444C22.4656 14.3835 20.9298 14.6585 19.9968 15.719Z"
              stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>Framewiz</span>
          <!-- <img src="/assets/images/auth/logo.png" alt="" style="width: 100%;"> -->
        </div>
        <div></div>
      </div>

      <div class="child_" style="background: #999999;">
      </div>

      <div class="row parent_ p-4" style="height:100%;">
        <div class="col-lg-6 col-xl-6 col-md-6 col-sm-12 col-12 d-flex align-items-center justify-content-center">
          <img src='/assets/images/auth/otp.png' alt="" style="width:100%;height:auto;">
        </div>
        <div class="col-lg-6 col-xl-6 col-md-6 col-sm-12 col-12 d-flex flex-column justify-content-center">

          <div class="header mb-3">
            <!-- @if(session('error')) -->
            <%if(err){%>
              <div class="alert alert-danger text-center">
                <!-- {{ session('error') }} -->
                <div>
                  <%= err %>
                </div>
              </div>
              <!-- @endif -->
              <%}%>
          </div>

          <form class="num_container" action="/postOtp/<%=id%>" method="post">



            <h2><b>OTP</b></h2>
            <!-- <p class="text-center" style="color: #808080	;">A 4 digit Code has been sent to +8801*******36</p> -->
            <p class="text-center mb-4" style="color: #808080	;">A 4 digit Code has been sent to <%=num%>
            </p>

            <div class="inputfield">
              <input type="number" maxlength="1" class="input" name="num1" disabled />
              <input type="number" maxlength="1" class="input" name="num2" disabled />
              <input type="number" maxlength="1" class="input" name="num3" disabled />
              <input type="number" maxlength="1" class="input" name="num4" disabled />
            </div>
            <input type="text" name="otp" id="otp" style="display:none;">

            <div class="text-center my-4">
              <p>Didn't receive the code? <span style="color: #6499FF;;"> <a href="/resend/<%=id%>" style="text-decoration: none;"><b>RESEND</b></a> </span></p>
            </div>

            <button class="hide mt-5" type="submit" id="submit" onclick="popup_msg()">Verify</button>

          </form>

        </div>

      </div>
    </div>
  </div>


  <script>
    //Initial references
    const input = document.querySelectorAll(".input");
    const inputField = document.querySelector(".inputfield");
    const submitButton = document.getElementById("submit");
    const otp = document.getElementById("otp");
    let inputCount = 0,
      finalInput = "";

    //Update input
    const updateInputConfig = (element, disabledStatus) => {
      element.disabled = disabledStatus;
      if (!disabledStatus) {
        element.focus();
      } else {
        element.blur();
      }
    };

    input.forEach((element) => {
      element.addEventListener("keyup", (e) => {
        e.target.value = e.target.value.replace(/[^0-9]/g, "");
        let {
          value
        } = e.target;

        if (value.length == 1) {
          updateInputConfig(e.target, true);
          if (inputCount <= 3 && e.key != "Backspace") {
            finalInput += value;
            otp.setAttribute('value', finalInput);

            if (inputCount < 3) {
              updateInputConfig(e.target.nextElementSibling, false);
            }
          }
          inputCount += 1;
        } else if (value.length == 0 && e.key == "Backspace") {
          finalInput = finalInput.substring(0, finalInput.length - 1);
          if (inputCount == 0) {
            updateInputConfig(e.target, false);
            return false;
          }
          updateInputConfig(e.target, true);
          e.target.previousElementSibling.value = "";
          updateInputConfig(e.target.previousElementSibling, false);
          inputCount -= 1;
        } else if (value.length > 1) {
          e.target.value = value.split("")[0];
        }
        submitButton.classList.add("hide");
      });
    });

    window.addEventListener("keyup", (e) => {
      if (inputCount > 3) {
        submitButton.classList.remove("hide");
        submitButton.classList.add("show");
        if (e.key == "Backspace") {
          finalInput = finalInput.substring(0, finalInput.length - 1);
          updateInputConfig(inputField.lastElementChild, false);
          inputField.lastElementChild.value = "";
          inputCount -= 1;
          submitButton.classList.add("hide");
        }
      }
    });



    //Start
    const startInput = () => {
      inputCount = 0;
      finalInput = "";
      input.forEach((element) => {
        element.value = "";
      });
      updateInputConfig(inputField.firstElementChild, false);
    };

    window.onload = startInput();
  </script>

</body>

</html>